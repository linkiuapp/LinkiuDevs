<?php

namespace Database\Seeders;

use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;
use App\Models\EmailTemplate;

class BillingEmailTemplatesSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $billingTemplates = [
            [
                'template_key' => 'invoice_created',
                'name' => 'Nueva Factura Generada',
                'context' => 'billing',
                'subject' => '📄 Nueva factura #{{invoice_number}} - {{store_name}}',
                'body_html' => '<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Nueva Factura</title><style>body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;line-height:1.6;color:#333;margin:0;padding:0}.container{max-width:600px;margin:0 auto;background:#ffffff}.header{background:linear-gradient(135deg,#3b82f6 0%,#1d4ed8 100%);padding:30px 20px;text-align:center}.header h1{color:white;margin:0;font-size:26px;font-weight:600}.content{padding:30px}.invoice-box{background:#f8fafc;border:2px solid #3b82f6;border-radius:12px;padding:25px;margin:25px 0}.invoice-item{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid #e5e7eb}.invoice-item:last-child{border-bottom:none}.amount-highlight{background:#dbeafe;padding:15px;border-radius:8px;text-align:center;font-size:18px;font-weight:600;color:#1d4ed8;margin:20px 0}.due-date{background:#fef3c7;border-left:4px solid #f59e0b;padding:15px;margin:20px 0;border-radius:8px}.due-date strong{color:#92400e}.pay-button{display:inline-block;background:#3b82f6;color:white;padding:15px 30px;text-decoration:none;border-radius:8px;margin:20px 0;font-weight:600;font-size:16px}.pay-button:hover{background:#1d4ed8}.footer{background:#f7fafc;padding:20px;text-align:center;font-size:14px;color:#64748b;border-top:1px solid #e2e8f0}.emoji{font-size:24px}</style></head><body><div class="container"><div class="header"><div class="emoji">📄</div><h1>Nueva Factura</h1></div><div class="content"><p>Hola <strong>{{admin_name}}</strong>,</p><p>Se ha generado una nueva factura para tu tienda <strong>{{store_name}}</strong>.</p><div class="invoice-box"><h2>🧾 Detalles de la factura:</h2><div class="invoice-item"><span><strong>Número de factura:</strong></span><span>#{{invoice_number}}</span></div><div class="invoice-item"><span><strong>Plan:</strong></span><span>{{plan_name}}</span></div><div class="invoice-item"><span><strong>Período:</strong></span><span>{{period}}</span></div><div class="amount-highlight">💰 <strong>Total a pagar: {{amount}}</strong></div></div><div class="due-date">⏰ <strong>Fecha de vencimiento:</strong> {{due_date}} ({{days_to_pay}} días para pagar)</div><div class="invoice-box"><h3>💳 Cómo pagar:</h3><p>{{payment_instructions}}</p><p>📞 <strong>Soporte:</strong> <a href="mailto:{{support_email}}">{{support_email}}</a></p></div><div style="text-align:center;"><a href="{{dashboard_url}}" class="pay-button">📊 Ver en mi panel</a></div><p>Gracias por confiar en {{app_name}} para tu negocio online. 🚀</p></div><div class="footer"><p>Equipo de Facturación - {{app_name}} • {{current_year}}</p><p>Este es un email automático, por favor no respondas a esta dirección.</p></div></div></body></html>',
                'body_text' => '📄 Nueva Factura #{{invoice_number}}\n\nHola {{admin_name}},\n\nSe ha generado una nueva factura para tu tienda {{store_name}}.\n\n🧾 DETALLES DE LA FACTURA:\n- Número: #{{invoice_number}}\n- Plan: {{plan_name}}\n- Período: {{period}}\n- Total a pagar: {{amount}}\n\n⏰ Fecha de vencimiento: {{due_date}} ({{days_to_pay}} días para pagar)\n\n💳 CÓMO PAGAR:\n{{payment_instructions}}\n\n📊 Ver en mi panel: {{dashboard_url}}\n📞 Soporte: {{support_email}}\n\nGracias por confiar en {{app_name}} para tu negocio online.\n\nEquipo de Facturación - {{app_name}}',
                'variables' => ['invoice_number', 'amount', 'due_date', 'store_name', 'plan_name', 'period', 'days_to_pay', 'payment_instructions', 'support_email', 'dashboard_url', 'admin_name'],
                'is_active' => true
            ],
            [
                'template_key' => 'invoice_due_reminder',
                'name' => 'Recordatorio de Vencimiento',
                'context' => 'billing',
                'subject' => '⏰ Recordatorio: Tu factura #{{invoice_number}} vence pronto',
                'body_html' => '<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Recordatorio de Factura</title><style>body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;line-height:1.6;color:#333;margin:0;padding:0}.container{max-width:600px;margin:0 auto;background:#ffffff}.header{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%);padding:30px 20px;text-align:center}.header h1{color:white;margin:0;font-size:26px;font-weight:600}.content{padding:30px}.reminder-box{background:#fffbeb;border:2px solid #f59e0b;border-radius:12px;padding:25px;margin:25px 0;text-align:center}.countdown{background:#fbbf24;color:white;padding:15px;border-radius:8px;font-size:20px;font-weight:600;margin:20px 0}.invoice-summary{background:#f8fafc;border-radius:8px;padding:20px;margin:20px 0}.invoice-item{display:flex;justify-content:space-between;margin:10px 0}.pay-now-button{display:inline-block;background:#dc2626;color:white;padding:18px 35px;text-decoration:none;border-radius:8px;margin:20px 0;font-weight:600;font-size:18px;text-transform:uppercase}.pay-now-button:hover{background:#b91c1c}.footer{background:#f7fafc;padding:20px;text-align:center;font-size:14px;color:#64748b;border-top:1px solid #e2e8f0}.emoji{font-size:24px}</style></head><body><div class="container"><div class="header"><div class="emoji">⏰</div><h1>Recordatorio de Pago</h1></div><div class="content"><p>Hola <strong>{{admin_name}}</strong>,</p><div class="reminder-box"><h2>📋 Tu factura está por vencer</h2><div class="countdown">⏰ {{days_remaining}} días restantes</div><p>Para mantener tu tienda <strong>{{store_name}}</strong> activa, por favor realiza el pago antes del <strong>{{due_date}}</strong>.</p></div><div class="invoice-summary"><h3>💼 Resumen de factura:</h3><div class="invoice-item"><span>Factura:</span><span><strong>#{{invoice_number}}</strong></span></div><div class="invoice-item"><span>Plan:</span><span>{{plan_name}}</span></div><div class="invoice-item"><span>Período:</span><span>{{period}}</span></div><div class="invoice-item"><span><strong>Total:</strong></span><span><strong>{{amount}}</strong></span></div></div><div style="text-align:center;"><a href="{{dashboard_url}}" class="pay-now-button">💳 Pagar Ahora</a></div><div style="background:#fee2e2;padding:15px;border-radius:8px;margin:20px 0;"><h3>📞 ¿Necesitas ayuda?</h3><p>{{payment_instructions}}</p><p>Contáctanos: <a href="mailto:{{support_email}}">{{support_email}}</a></p></div><p><small>💡 <strong>Tip:</strong> Pagar puntualmente te ayuda a mantener un servicio ininterrumpido.</small></p></div><div class="footer"><p>Equipo de Facturación - {{app_name}} • {{current_year}}</p></div></div></body></html>',
                'body_text' => '⏰ Recordatorio: Factura #{{invoice_number}} vence pronto\n\nHola {{admin_name}},\n\nTu factura está por vencer en {{days_remaining}} días.\n\nPara mantener tu tienda {{store_name}} activa, por favor realiza el pago antes del {{due_date}}.\n\n💼 RESUMEN:\n- Factura: #{{invoice_number}}\n- Plan: {{plan_name}}\n- Período: {{period}}\n- Total: {{amount}}\n\n💳 Pagar ahora: {{dashboard_url}}\n\n📞 ¿NECESITAS AYUDA?\n{{payment_instructions}}\nContáctanos: {{support_email}}\n\n💡 Tip: Pagar puntualmente te ayuda a mantener un servicio ininterrumpido.\n\nEquipo de Facturación - {{app_name}}',
                'variables' => ['invoice_number', 'amount', 'due_date', 'store_name', 'plan_name', 'period', 'days_remaining', 'payment_instructions', 'support_email', 'dashboard_url', 'admin_name'],
                'is_active' => true
            ],
            [
                'template_key' => 'invoice_overdue',
                'name' => 'Factura Vencida',
                'context' => 'billing',
                'subject' => '🚨 URGENTE: Tu factura #{{invoice_number}} está vencida',
                'body_html' => '<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Factura Vencida</title><style>body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;line-height:1.6;color:#333;margin:0;padding:0}.container{max-width:600px;margin:0 auto;background:#ffffff}.header{background:linear-gradient(135deg,#dc2626 0%,#991b1b 100%);padding:30px 20px;text-align:center}.header h1{color:white;margin:0;font-size:26px;font-weight:600}.content{padding:30px}.overdue-box{background:#fef2f2;border:2px solid #dc2626;border-radius:12px;padding:25px;margin:25px 0;text-align:center}.days-overdue{background:#dc2626;color:white;padding:15px;border-radius:8px;font-size:18px;font-weight:600;margin:15px 0}.urgency-alert{background:#fed7d7;border-left:4px solid #dc2626;padding:20px;margin:20px 0;border-radius:8px}.urgency-alert h3{color:#991b1b;margin-top:0}.invoice-details{background:#f8fafc;border-radius:8px;padding:20px;margin:20px 0}.invoice-item{display:flex;justify-content:space-between;margin:10px 0;padding:8px 0;border-bottom:1px solid #e5e7eb}.invoice-item:last-child{border-bottom:none}.urgent-pay-button{display:inline-block;background:#dc2626;color:white;padding:20px 40px;text-decoration:none;border-radius:8px;margin:20px 0;font-weight:600;font-size:20px;text-transform:uppercase;animation:pulse 2s infinite}.urgent-pay-button:hover{background:#991b1b}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}.warning-section{background:#fbbf24;color:#92400e;padding:20px;border-radius:8px;margin:20px 0;font-weight:600}.footer{background:#f7fafc;padding:20px;text-align:center;font-size:14px;color:#64748b;border-top:1px solid #e2e8f0}.emoji{font-size:24px}</style></head><body><div class="container"><div class="header"><div class="emoji">🚨</div><h1>Factura Vencida</h1></div><div class="content"><p><strong>{{admin_name}}</strong>,</p><div class="overdue-box"><h2>⚠️ Tu factura está vencida</h2><div class="days-overdue">{{days_overdue}} días de retraso</div><p>La factura de tu tienda <strong>{{store_name}}</strong> venció el <strong>{{due_date}}</strong>.</p></div><div class="urgency-alert"><h3>📢 {{urgency_message}}</h3><p>{{suspension_warning}}</p></div><div class="invoice-details"><h3>💼 Detalles de la factura:</h3><div class="invoice-item"><span>Número:</span><span><strong>#{{invoice_number}}</strong></span></div><div class="invoice-item"><span>Plan:</span><span>{{plan_name}}</span></div><div class="invoice-item"><span>Período:</span><span>{{period}}</span></div><div class="invoice-item"><span>Venció el:</span><span><strong>{{due_date}}</strong></span></div><div class="invoice-item" style="font-size:18px;color:#dc2626;"><span><strong>TOTAL ADEUDADO:</strong></span><span><strong>{{amount}}</strong></span></div></div><div style="text-align:center;"><a href="{{dashboard_url}}" class="urgent-pay-button">💳 Pagar Inmediatamente</a></div><div class="warning-section">⚠️ <strong>IMPORTANTE:</strong> Para evitar la suspensión de tu tienda y mantener tus ventas activas, realiza el pago lo antes posible.</div><div style="background:#f0f9ff;padding:20px;border-radius:8px;margin:20px 0;"><h3>📞 Soporte inmediato:</h3><p>{{payment_instructions}}</p><p><strong>Email:</strong> <a href="mailto:{{support_email}}">{{support_email}}</a></p></div></div><div class="footer"><p>Equipo de Facturación - {{app_name}} • {{current_year}}</p></div></div></body></html>',
                'body_text' => '🚨 URGENTE: Factura #{{invoice_number}} está vencida\n\n{{admin_name}},\n\nTu factura está vencida por {{days_overdue}} días.\n\nLa factura de tu tienda {{store_name}} venció el {{due_date}}.\n\n📢 {{urgency_message}}\n{{suspension_warning}}\n\n💼 DETALLES:\n- Número: #{{invoice_number}}\n- Plan: {{plan_name}}\n- Período: {{period}}\n- Venció el: {{due_date}}\n- TOTAL ADEUDADO: {{amount}}\n\n💳 Pagar inmediatamente: {{dashboard_url}}\n\n⚠️ IMPORTANTE: Para evitar la suspensión de tu tienda y mantener tus ventas activas, realiza el pago lo antes posible.\n\n📞 SOPORTE INMEDIATO:\n{{payment_instructions}}\nEmail: {{support_email}}\n\nEquipo de Facturación - {{app_name}}',
                'variables' => ['invoice_number', 'amount', 'due_date', 'store_name', 'plan_name', 'period', 'days_overdue', 'urgency_message', 'suspension_warning', 'payment_instructions', 'support_email', 'dashboard_url', 'admin_name'],
                'is_active' => true
            ],
            [
                'template_key' => 'payment_received',
                'name' => 'Pago Recibido',
                'context' => 'billing',
                'subject' => '✅ ¡Pago recibido! Factura #{{invoice_number}} - {{store_name}}',
                'body_html' => '<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Pago Recibido</title><style>body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;line-height:1.6;color:#333;margin:0;padding:0}.container{max-width:600px;margin:0 auto;background:#ffffff}.header{background:linear-gradient(135deg,#10b981 0%,#059669 100%);padding:30px 20px;text-align:center}.header h1{color:white;margin:0;font-size:26px;font-weight:600}.content{padding:30px}.success-box{background:#ecfdf5;border:2px solid #10b981;border-radius:12px;padding:25px;margin:25px 0;text-align:center}.success-icon{background:#10b981;color:white;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:24px}.payment-details{background:#f8fafc;border-radius:8px;padding:20px;margin:20px 0}.detail-item{display:flex;justify-content:space-between;margin:10px 0;padding:8px 0;border-bottom:1px solid #e5e7eb}.detail-item:last-child{border-bottom:none}.thank-you{background:#dbeafe;padding:20px;border-radius:8px;margin:20px 0;text-align:center}.next-billing{background:#f0fdf4;border-left:4px solid #10b981;padding:15px;margin:20px 0;border-radius:8px}.access-button{display:inline-block;background:#10b981;color:white;padding:15px 30px;text-decoration:none;border-radius:8px;margin:20px 0;font-weight:600;font-size:16px}.access-button:hover{background:#059669}.footer{background:#f7fafc;padding:20px;text-align:center;font-size:14px;color:#64748b;border-top:1px solid #e2e8f0}.emoji{font-size:24px}</style></head><body><div class="container"><div class="header"><div class="emoji">✅</div><h1>¡Pago Recibido!</h1></div><div class="content"><div class="success-box"><div class="success-icon">✓</div><h2>🎉 ¡Gracias por tu pago!</h2><p>Hemos recibido exitosamente el pago de tu factura para <strong>{{store_name}}</strong>.</p></div><div class="payment-details"><h3>💰 Detalles del pago:</h3><div class="detail-item"><span>Factura:</span><span><strong>#{{invoice_number}}</strong></span></div><div class="detail-item"><span>Monto pagado:</span><span><strong>{{amount}}</strong></span></div><div class="detail-item"><span>Fecha de pago:</span><span>{{payment_date}}</span></div><div class="detail-item"><span>Plan:</span><span>{{plan_name}}</span></div><div class="detail-item"><span>Período:</span><span>{{period}}</span></div></div><div class="thank-you"><h3>🙏 {{thank_you_message}}</h3><p>{{service_status}}</p></div><div class="next-billing"><h3>📅 Próxima facturación:</h3><p>Tu siguiente factura será generada para el <strong>{{next_billing_date}}</strong>.</p></div><div style="text-align:center;"><a href="{{dashboard_url}}" class="access-button">🏪 Acceder a mi tienda</a></div><p>Continuamos trabajando para brindarte el mejor servicio para tu negocio online. 🚀</p></div><div class="footer"><p>Equipo de Facturación - {{app_name}} • {{current_year}}</p><p>Este es un email automático, por favor no respondas a esta dirección.</p></div></div></body></html>',
                'body_text' => '✅ ¡Pago Recibido! Factura #{{invoice_number}}\n\n🎉 ¡Gracias por tu pago!\n\nHemos recibido exitosamente el pago de tu factura para {{store_name}}.\n\n💰 DETALLES DEL PAGO:\n- Factura: #{{invoice_number}}\n- Monto pagado: {{amount}}\n- Fecha de pago: {{payment_date}}\n- Plan: {{plan_name}}\n- Período: {{period}}\n\n🙏 {{thank_you_message}}\n{{service_status}}\n\n📅 PRÓXIMA FACTURACIÓN:\nTu siguiente factura será generada para el {{next_billing_date}}.\n\n🏪 Acceder a mi tienda: {{dashboard_url}}\n\nContinuamos trabajando para brindarte el mejor servicio para tu negocio online.\n\nEquipo de Facturación - {{app_name}}',
                'variables' => ['invoice_number', 'amount', 'payment_date', 'store_name', 'plan_name', 'period', 'next_billing_date', 'service_status', 'thank_you_message', 'dashboard_url'],
                'is_active' => true
            ],
            [
                'template_key' => 'subscription_suspended',
                'name' => 'Suscripción Suspendida',
                'context' => 'billing',
                'subject' => '🚫 Tu tienda {{store_name}} ha sido suspendida temporalmente',
                'body_html' => '<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Suscripción Suspendida</title><style>body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;line-height:1.6;color:#333;margin:0;padding:0}.container{max-width:600px;margin:0 auto;background:#ffffff}.header{background:linear-gradient(135deg,#dc2626 0%,#991b1b 100%);padding:30px 20px;text-align:center}.header h1{color:white;margin:0;font-size:26px;font-weight:600}.content{padding:30px}.suspension-box{background:#fef2f2;border:2px solid #dc2626;border-radius:12px;padding:25px;margin:25px 0;text-align:center}.suspension-icon{background:#dc2626;color:white;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:24px}.suspension-details{background:#f8fafc;border-radius:8px;padding:20px;margin:20px 0}.detail-item{display:flex;justify-content:space-between;margin:10px 0;padding:8px 0;border-bottom:1px solid #e5e7eb}.detail-item:last-child{border-bottom:none}.reactivation-box{background:#fffbeb;border:2px solid #f59e0b;border-radius:8px;padding:20px;margin:20px 0}.data-safe{background:#f0fdf4;border-left:4px solid #10b981;padding:15px;margin:20px 0;border-radius:8px}.contact-urgent{background:#fee2e2;padding:20px;border-radius:8px;margin:20px 0;text-align:center}.contact-button{display:inline-block;background:#dc2626;color:white;padding:18px 35px;text-decoration:none;border-radius:8px;margin:15px 0;font-weight:600;font-size:18px}.contact-button:hover{background:#991b1b}.footer{background:#f7fafc;padding:20px;text-align:center;font-size:14px;color:#64748b;border-top:1px solid #e2e8f0}.emoji{font-size:24px}</style></head><body><div class="container"><div class="header"><div class="emoji">🚫</div><h1>Suscripción Suspendida</h1></div><div class="content"><div class="suspension-box"><div class="suspension-icon">⏸️</div><h2>Tu tienda ha sido suspendida temporalmente</h2><p>Lamentablemente, hemos tenido que suspender temporalmente tu tienda <strong>{{store_name}}</strong> debido a facturas pendientes de pago.</p></div><div class="suspension-details"><h3>📋 Detalles de la suspensión:</h3><div class="detail-item"><span>Fecha de suspensión:</span><span><strong>{{suspension_date}}</strong></span></div><div class="detail-item"><span>Motivo:</span><span>{{suspension_reason}}</span></div><div class="detail-item"><span>Factura pendiente:</span><span><strong>#{{invoice_number}}</strong></span></div><div class="detail-item"><span>Monto adeudado:</span><span><strong>{{amount}}</strong></span></div><div class="detail-item"><span>Días de retraso:</span><span><strong>{{days_overdue}} días</strong></span></div></div><div class="reactivation-box"><h3>🔄 ¿Cómo reactivar tu tienda?</h3><p><strong>{{reactivation_instructions}}</strong></p><ol><li>💳 Realiza el pago de la factura pendiente</li><li>📞 Contacta nuestro equipo de soporte</li><li>⚡ Tu tienda será reactivada automáticamente</li></ol></div><div class="data-safe"><h3>🛡️ Tus datos están seguros</h3><p><strong>{{data_preservation}}</strong></p><p>No te preocupes, toda la información de tu tienda, productos y clientes está completamente segura y será restaurada al reactivar tu cuenta.</p></div><div class="contact-urgent"><h3>📞 Contacto inmediato</h3><p><strong>Para resolver esto lo antes posible:</strong></p><p>📧 Email: <a href="mailto:{{support_email}}">{{support_email}}</a></p><p>📱 Teléfono: <strong>{{support_phone}}</strong></p><a href="mailto:{{support_email}}" class="contact-button">📧 Contactar Soporte</a></div><p><small>⚠️ <strong>Nota:</strong> Mientras tu tienda esté suspendida, tus clientes no podrán acceder a ella ni realizar compras. Reactivala lo antes posible para no perder ventas.</small></p></div><div class="footer"><p>Equipo de Facturación - {{app_name}} • {{current_year}}</p></div></div></body></html>',
                'body_text' => '🚫 Suscripción Suspendida - {{store_name}}\n\nTu tienda ha sido suspendida temporalmente.\n\nLamentablemente, hemos tenido que suspender temporalmente tu tienda {{store_name}} debido a facturas pendientes de pago.\n\n📋 DETALLES:\n- Fecha de suspensión: {{suspension_date}}\n- Motivo: {{suspension_reason}}\n- Factura pendiente: #{{invoice_number}}\n- Monto adeudado: {{amount}}\n- Días de retraso: {{days_overdue}} días\n\n🔄 ¿CÓMO REACTIVAR?\n{{reactivation_instructions}}\n1. Realiza el pago de la factura pendiente\n2. Contacta nuestro equipo de soporte\n3. Tu tienda será reactivada automáticamente\n\n🛡️ TUS DATOS ESTÁN SEGUROS\n{{data_preservation}}\n\n📞 CONTACTO INMEDIATO:\nEmail: {{support_email}}\nTeléfono: {{support_phone}}\n\n⚠️ Nota: Mientras tu tienda esté suspendida, tus clientes no podrán acceder a ella ni realizar compras.\n\nEquipo de Facturación - {{app_name}}',
                'variables' => ['store_name', 'suspension_date', 'suspension_reason', 'invoice_number', 'amount', 'days_overdue', 'reactivation_instructions', 'data_preservation', 'support_email', 'support_phone'],
                'is_active' => true
            ]
        ];

        foreach ($billingTemplates as $template) {
            EmailTemplate::updateOrCreate(
                ['template_key' => $template['template_key']],
                $template
            );
        }

        $this->command->info('✅ Plantillas de facturación creadas/actualizadas: ' . count($billingTemplates));
    }
}










